From: David Paleino <dapal@debian.org>
Subject: support new urwid 1.0.0
Origin: vendor
Bug-Debian: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=645681
Forwarded: http://bazaar.launchpad.net/~wicd-devel/wicd/experimental/revision/598

---
 curses/curses_misc.py |    6 +++++-
 curses/wicd-curses.py |   12 ++++++++++--
 2 files changed, 15 insertions(+), 3 deletions(-)

--- wicd.orig/curses/curses_misc.py
+++ wicd/curses/curses_misc.py
@@ -478,7 +478,11 @@ class Dialog2(urwid.WidgetWrap):
                 while not keys:
                     keys = ui.get_input()
                 for k in keys:
-                    if urwid.is_mouse_event(k):
+                    if urwid.VERSION < (1, 0, 0):
+                        check_mouse_event = urwid.is_mouse_event
+                    else:
+                        check_mouse_event = urwid.util.is_mouse_event
+                    if check_mouse_event(k):
                         event, button, col, row = k
                         overlay.mouse_event( size,
                                 event, button, col, row,
--- wicd.orig/curses/wicd-curses.py
+++ wicd/curses/wicd-curses.py
@@ -240,7 +240,11 @@ def help_dialog(body):
         # Don't stop because someone let go of the mouse on the frame
         mouse_release = False
         for k in keys:
-            if urwid.is_mouse_event(k) and k[0] == "mouse release":
+            if urwid.VERSION < (1, 0, 0):
+                check_mouse_event = urwid.is_mouse_event
+            else:
+                check_mouse_event = urwid.util.is_mouse_event
+            if check_mouse_event(k) and k[0] == "mouse release":
                 mouse_release = True
                 break
         if mouse_release :
@@ -881,7 +885,11 @@ class appGUI():
                                                 data[4], False)
             
         for k in keys:
-            if urwid.is_mouse_event(k):
+            if urwid.VERSION < (1, 0, 0):
+                check_mouse_event = urwid.is_mouse_event
+            else:
+                check_mouse_event = urwid.util.is_mouse_event
+            if check_mouse_event(k):
                 event, button, col, row = k
                 self.frame.mouse_event( self.size,
                         event, button, col, row,
