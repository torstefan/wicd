---
 in/scripts=wicd-cli.in    |    2 +-
 in/scripts=wicd-client.in |    5 +----
 in/scripts=wicd-curses.in |    2 +-
 in/scripts=wicd.in        |    2 +-
 in/wicd=wpath.py.in       |    4 ++++
 setup.py                  |   31 +++++++++++++++++++------------
 wicd/gui.py               |   10 +++++-----
 wicd/netentry.py          |   10 +++++-----
 wicd/prefs.py             |    2 +-
 wicd/wicd-client.py       |    4 ++--
 10 files changed, 40 insertions(+), 32 deletions(-)

--- wicd.orig/setup.py
+++ wicd/setup.py
@@ -61,6 +61,10 @@ class configure(Command):
         ('bin=', None, 'set the bin directory'),
         ('sbin=', None, 'set the sbin directory'),
         ('backends=', None, 'set the backend storage directory'),
+        ('daemon=', None, 'set the daemon directory'),
+        ('curses=', None, 'set the curses UI directory'),
+        ('gtk=', None, 'set the GTK UI directory'),
+        ('cli=', None, 'set the CLI directory'),
         ('networks=', None, 'set the encryption configuration directory'),
         ('log=', None, 'set the log directory'),
         ('resume=', None, 'set the directory the resume from suspend script is stored in'),
@@ -113,7 +117,11 @@ class configure(Command):
         self.encryption = self.etc + 'encryption/templates/'
         self.bin = '/usr/bin/'
         self.sbin = '/usr/sbin/'
-        self.backends = self.lib + 'backends'
+        self.daemon = self.share + 'daemon'
+        self.backends = self.share + 'backends'
+        self.curses = self.share + 'curses'
+        self.gtk = self.share + 'gtk'
+        self.cli = self.share + 'cli'
         self.varlib = '/var/lib/wicd/'
         self.networks = self.varlib + 'configurations/'
         self.log = '/var/log/wicd/'
@@ -464,7 +472,7 @@ configure yet or you are running it for 
 
 data = []
 py_modules=['wicd.networking','wicd.misc','wicd.wnettools',
-           'wicd.wpath','wicd.prefs','wicd.netentry','wicd.dbusmanager', 
+           'wicd.wpath','wicd.dbusmanager',
            'wicd.logfile','wicd.backend','wicd.configmanager',
            'wicd.translations']
 
@@ -478,7 +486,7 @@ try:
                         os.listdir('encryption/templates') if not b.startswith('.')]),
     (wpath.networks, []),
     (wpath.sbin,  ['scripts/wicd']),  
-    (wpath.lib, ['wicd/monitor.py', 'wicd/wicd-daemon.py', 'wicd/configscript.py',
+    (wpath.daemon, ['wicd/monitor.py', 'wicd/wicd-daemon.py', 'wicd/configscript.py',
                  'wicd/suspend.py', 'wicd/autoconnect.py']), 
     (wpath.backends, ['wicd/backends/be-external.py', 'wicd/backends/be-ioctl.py']),
     (wpath.scripts, []),
@@ -488,11 +496,10 @@ try:
     (wpath.postconnectscripts, []),
     ]
     if not wpath.no_install_gtk:
-        py_modules.extend(['wicd.gui', 'wicd.guiutil'])
         data.append((wpath.desktop, ['other/wicd.desktop']))
         data.append((wpath.bin, ['scripts/wicd-client']))
-        data.append((wpath.share, ['data/wicd.glade']))
-        data.append((wpath.lib, ['wicd/wicd-client.py']))
+        data.append((wpath.gtk, ['wicd/wicd-client.py', 'wicd/netentry.py', 'wicd/prefs.py',
+                                 'wicd/gui.py', 'wicd/guiutil.py', 'data/wicd.glade']))
         data.append((wpath.autostart, ['other/wicd-tray.desktop']))
         if not wpath.no_install_man:
             data.append((wpath.mandir + 'man1/', [ 'man/wicd-client.1' ]))
@@ -506,11 +513,11 @@ try:
         data.append((wpath.icons + '16x16/apps/', ['icons/16px/wicd-client.png']))
         data.append((wpath.images, [('images/' + b) for b in os.listdir('images') if not b.startswith('.')]))
     if not wpath.no_install_ncurses:
-        data.append((wpath.lib, ['curses/curses_misc.py']))
-        data.append((wpath.lib, ['curses/prefs_curses.py']))
-        data.append((wpath.lib, ['curses/wicd-curses.py']))
-        data.append((wpath.lib, ['curses/netentry_curses.py']))
-        data.append((wpath.lib, ['curses/configscript_curses.py']))
+        data.append((wpath.curses, ['curses/curses_misc.py']))
+        data.append((wpath.curses, ['curses/prefs_curses.py']))
+        data.append((wpath.curses, ['curses/wicd-curses.py']))
+        data.append((wpath.curses, ['curses/netentry_curses.py']))
+        data.append((wpath.curses, ['curses/configscript_curses.py']))
         data.append((wpath.bin, ['scripts/wicd-curses'])) 
         if not wpath.no_install_man:
             data.append(( wpath.mandir + 'man8/', ['man/wicd-curses.8'])) 
@@ -518,7 +525,7 @@ try:
             data.append(( wpath.docdir, ['curses/README.curses'])) 
             data.append(( wpath.docdir, ['curses/TODO.curses'])) 
     if not wpath.no_install_cli:
-        data.append((wpath.lib, ['cli/wicd-cli.py']))
+        data.append((wpath.cli, ['cli/wicd-cli.py']))
         data.append((wpath.bin, ['scripts/wicd-cli'])) 
         if not wpath.no_install_man:
             data.append(( wpath.mandir + 'man8/', ['man/wicd-cli.8'])) 
--- wicd.orig/in/wicd=wpath.py.in
+++ wicd/in/wicd=wpath.py.in
@@ -44,6 +44,10 @@ pmutils = '%PMUTILS%'
 dbus = '%DBUS%'
 desktop = '%DESKTOP%'
 backends= '%BACKENDS%'
+daemon = '%DAEMON%'
+curses = '%CURSES%'
+gtk = '%GTK%'
+cli = '%CLI%'
 translations = '%TRANSLATIONS%'
 icons = '%ICONS%'
 autostart = '%AUTOSTART%'
--- wicd.orig/wicd/gui.py
+++ wicd/wicd/gui.py
@@ -36,12 +36,12 @@ from dbus import DBusException
 from wicd import misc
 from wicd import wpath
 from wicd import dbusmanager
-from wicd import prefs
-from wicd import netentry
 from wicd.misc import noneToString
-from wicd.netentry import WiredNetworkEntry, WirelessNetworkEntry
-from wicd.prefs import PreferencesDialog
-from wicd.guiutil import error, LabelEntry
+import prefs
+from prefs import PreferencesDialog
+import netentry
+from netentry import WiredNetworkEntry, WirelessNetworkEntry
+from guiutil import error, LabelEntry
 from wicd.translations import language
 
 if __name__ == '__main__':
--- wicd.orig/wicd/wicd-client.py
+++ wicd/wicd/wicd-client.py
@@ -60,9 +60,9 @@ except ImportError:
 # Wicd specific imports
 from wicd import wpath
 from wicd import misc
-from wicd import gui
 from wicd import dbusmanager
-from wicd.guiutil import error, can_use_notify
+import gui
+from guiutil import error, can_use_notify
 
 from wicd.translations import language
 
--- wicd.orig/in/scripts=wicd-cli.in
+++ wicd/in/scripts=wicd-cli.in
@@ -1,2 +1,2 @@
 #!/bin/bash
-exec python -O %LIB%wicd-cli.py $@
+exec python -O %LIB%cli/wicd-cli.py $@
--- wicd.orig/in/scripts=wicd-curses.in
+++ wicd/in/scripts=wicd-curses.in
@@ -6,4 +6,4 @@ if [ -e "%VARLIB%WHEREAREMYFILES" ] && [
     ln -s "%VARLIB%WHEREAREMYFILES" "$HOME/.wicd/WHEREAREMYFILES"
 fi
 
-exec python -O %LIB%wicd-curses.py $@
+exec python -O %LIB%curses/wicd-curses.py $@
--- wicd.orig/in/scripts=wicd.in
+++ wicd/in/scripts=wicd.in
@@ -3,4 +3,4 @@
 PYTHONPATH=%LIB%
 export PYTHONPATH
 
-exec python %LIB%wicd-daemon.py $@
+exec python %LIB%daemon/wicd-daemon.py $@
--- wicd.orig/in/scripts=wicd-client.in
+++ wicd/in/scripts=wicd-client.in
@@ -3,9 +3,6 @@ BOLD=$(tput bold)
 BLUE=$(tput setaf 4)
 NC=$(tput sgr0)
 
-PYTHONPATH=%LIB%
-export PYTHONPATH
-
 # check_firstrun()
 if [ ! -d "$HOME/.wicd" ]; then
     mkdir -p "$HOME/.wicd"
@@ -45,5 +42,5 @@ EOF
 
     fi
 else
-    exec python -O %LIB%wicd-client.py $@
+    exec %BIN%wicd-gtk
 fi
--- wicd.orig/wicd/prefs.py
+++ wicd/wicd/prefs.py
@@ -39,7 +39,7 @@ daemon = None
 wireless = None
 wired = None
 
-from translations import language
+from wicd.translations import language
 
 USER_SETTINGS_DIR = os.path.expanduser('~/.wicd/')
 
--- wicd.orig/wicd/netentry.py
+++ wicd/wicd/netentry.py
@@ -26,13 +26,13 @@ contained within them.
 import gtk
 import os
 
-import misc
-import wpath
-import dbusmanager
-from misc import noneToString, stringToNone, noneToBlankString, to_bool
+import wicd.misc
+import wicd.wpath
+import wicd.dbusmanager
+from wicd.misc import noneToString, stringToNone, noneToBlankString, to_bool
 from guiutil import error, LabelEntry, GreyLabel, LeftAlignedLabel, string_input
 
-from translations import language
+from wicd.translations import language
 
 # These get set when a NetworkEntry is instantiated.
 daemon = None
